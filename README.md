## üß† Game Hint Bot ‚Äî FastAPI + LangChain + OpenAI

–ò–ò-–∞–≥–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **–∏–≥—Ä–æ–≤—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫** –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è.  
–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ FastAPI, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LangChain –∏ OpenAI GPT-3.5.

---

### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—á–µ—Ä–µ–∑ Docker)

#### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/Baullin1767/game-hint-bot.git
cd game-hint-bot
```

#### 2. –£–∫–∞–∂–∏ API-–∫–ª—é—á OpenAI

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
OPENAI_API_KEY=sk-...  # –í–∞—à Project API Key –æ—Ç OpenAI
```

> ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π User API Keys. –ù—É–∂–µ–Ω Project API Key. –ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://platform.openai.com/api-keys

#### 3. –ó–∞–ø—É—Å—Ç–∏ —á–µ—Ä–µ–∑ Docker

```bash
docker-compose up --build
```

#### 4. –ü–µ—Ä–µ–π–¥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ —Å—Å—ã–ª–∫–µ:

üîó **[http://localhost:8000](http://localhost:8000)** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫

---

### üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–î–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/`

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
- –°–∫–∞—á–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –≤–∏–¥–µ JSON-—Ñ–∞–π–ª–∞ (`/hint/download`)
- –£–¥–æ–±–Ω—ã–π –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

---

### üß™ API-–¥–æ—Å—Ç—É–ø

#### GET `/hint?level_id=1`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—é:

```json
{
  "level_id": 1,
  "hints": [
    "–í–æ–∑—å–º–∏ –∫–ª—é—á –Ω–∞ (10, 20), —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –¥–≤–µ—Ä—å –Ω–∞ (80, 80)",
    "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ, –ª–æ–≤—É—à–∫–∞ –Ω–∞ (15, 18)",
    "–ü—Ä–æ–≤–µ—Ä—å —Å—É–Ω–¥—É–∫ –Ω–∞ (15, 25)"
  ]
}
```

---

#### GET `/hint/download?level_id=1`

–°–∫–∞—á–∏–≤–∞–Ω–∏–µ JSON-—Ñ–∞–π–ª–∞ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏  
(`Content-Disposition: attachment`, —Ñ–æ—Ä–º–∞—Ç `application/json`).

---

#### üî• DELETE `/hint/cache`

–£–¥–∞–ª—è–µ—Ç **–≤—Å–µ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** (—Ñ–∞–π–ª—ã –∏–∑ `cache/`).  
–ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω–µ–π –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

**–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞:**

```bash
curl -X DELETE http://localhost:8000/hint/cache
```

**–û—Ç–≤–µ—Ç:**

```json
{
  "message": "–ö–µ—à –ø–æ–¥—Å–∫–∞–∑–æ–∫ –æ—á–∏—â–µ–Ω"
}
```

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ levels/           # JSON-—Ñ–∞–π–ª—ã —É—Ä–æ–≤–Ω–µ–π
‚îú‚îÄ‚îÄ cache/            # –ê–≤—Ç–æ–∫–µ—à –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ —É—Ä–æ–≤–Ω—è–º
‚îú‚îÄ‚îÄ templates/        # HTML —à–∞–±–ª–æ–Ω—ã (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
‚îú‚îÄ‚îÄ main.py           # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ llm_agent.py      # –†–∞–±–æ—Ç–∞ —Å LangChain + OpenAI
‚îú‚îÄ‚îÄ prompt.py         # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
‚îú‚îÄ‚îÄ utils.py          # –ö–µ—à, –ø–∞—Ä—Å–∏–Ω–≥, –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile        # –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ .env              # –í–∞—à API-–∫–ª—é—á OpenAI (–ª–æ–∫–∞–ª—å–Ω–æ)
```

---

### üìÑ –ü—Ä–∏–º–µ—Ä JSON —É—Ä–æ–≤–Ω—è

```json
{
  "level": {
    "id": 1,
    "objects": [
      { "type": "player", "x": 5, "y": 5 },
      { "type": "key", "id": "key_red", "x": 10, "y": 20 },
      { "type": "door", "id": "door_red", "key_id": "key_red", "x": 80, "y": 80 }
    ]
  }
}
```

---

### üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω—é–∞–Ω—Å—ã

- üîê –ù–µ –∑–∞–±—É–¥—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Project API Key** –æ—Ç OpenAI (–∏–Ω–∞—á–µ –±—É–¥–µ—Ç `401 not_authorized_invalid_key_type`)
- üí° –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª—é–±–æ–π —Ñ–æ—Ä–º–∞—Ç –æ–±—ä–µ–∫—Ç–æ–≤ (–∫–ª—é—á–∏, –¥–≤–µ—Ä–∏, –ª–æ–≤—É—à–∫–∏, —Å—É–Ω–¥—É–∫–∏, –±–æ–Ω—É—Å—ã, –∫–Ω–æ–ø–∫–∏, —Ç–µ–ª–µ–ø–æ—Ä—Ç—ã –∏ —Ç.–¥.)
- ‚úÖ JSON –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM
- üöÄ –ü—Ä–æ–º–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤

---
